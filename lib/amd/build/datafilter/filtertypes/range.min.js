define("core/datafilter/filtertypes/range",["exports","core/datafilter/filtertype","core/datafilter/selectors","core/templates","core/str"],(function(_exports,_filtertype,_selectors,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Range filter.
   *
   * @module     core/datafilter/filtertypes/range
   * @copyright  2021 Catalyst IT Australia Pty Ltd
   * @author     Ghaly Marc-Alexandre <marc-alexandreghaly@catalyst-ca.net>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_filtertype=_interopRequireDefault(_filtertype),_selectors=_interopRequireDefault(_selectors),_templates=_interopRequireDefault(_templates);const filterRangeOptions={0:"optionone",1:"optiontwo",2:"optionthree"};class _default extends _filtertype.default{constructor(filterType,rootNode,initialValues){let filterOptions=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{filterRange:0,rangeUI:"text"};super(filterType,rootNode,initialValues),this.filterRange=filterOptions.filterRange,this.setUpRangeUi(filterOptions.rangeUI)}async addValueSelector(){}async displayRange(context){_templates.default.render("core/datafilter/filtertypes/range",context).then(((rangeUi,js)=>{_templates.default.replaceNodeContents(this.filterRoot.querySelector(_selectors.default.filter.regions.values),rangeUi,js)})).fail()}async rangeListenner(type){const placeholderone=await this.placeholderOne,placeholdertwo=await this.placeholderTwo;this.filterRoot.querySelector(_selectors.default.filter.fields.range).addEventListener("change",(()=>{const context={placeholderone:placeholderone,type:type};2===this.rangetype&&(context.placeholdertwo=placeholdertwo),this.displayRange(context)}))}async setUpRangeUi(type){const placeholderone=await this.placeholderOne,placeholdertwo=await this.placeholderTwo,context={placeholderone:placeholderone,placeholdertwo:placeholdertwo,type:type},filterRangeContext={};filterRangeContext[filterRangeOptions[0]]=!0,void 0!==this.filterRange&&(filterRangeContext[filterRangeOptions[0]]=!1,filterRangeContext[filterRangeOptions[this.filterRange]]=!0),void 0!==this.initialValues&&(context.initialvalueone=this.initialValues[0],context.placeholdertwo=null,this.initialValues.length>1&&(context.initialvaluetwo=this.initialValues[1],context.placeholdertwo=placeholdertwo)),_templates.default.render("core/datafilter/filtertypes/filter_range",filterRangeContext).then(((html,js)=>{_templates.default.replaceNodeContents(this.filterRoot.querySelector(_selectors.default.filter.regions.range),html,js),this.displayRange(context).then((()=>{this.rangeListenner(type)})).catch()})).catch()}get placeholderOne(){return(0,_str.get_string)("rangestart","core_question")}get placeholderTwo(){return(0,_str.get_string)("rangeend","core_question")}get rangetype(){return parseInt(this.filterRoot.querySelector(_selectors.default.filter.fields.range).value,10)}get rawValues(){const valueSelector="[data-filter-type="+this.filterType+"] .rangevalue",values=[this.filterRoot.querySelector(valueSelector+"1").value];if(2===this.rangetype){const rangeValue2=this.filterRoot.querySelector(valueSelector+"2").value;values.push(rangeValue2)}return values}get filterOptions(){return{rangetype:this.rangetype}}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=range.min.js.map